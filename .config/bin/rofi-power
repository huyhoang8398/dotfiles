#!/usr/bin/env sh
#
# A rofi powered menu to execute power related action.
# Uses: amixer mpc poweroff reboot rofi rofi-prompt

power_off='Power off'
reboot='Reboot'
suspend='Suspend'
log_out='Log out'

chosen=$(printf '%s;%s;%s;%s\n' "$power_off" "$reboot" "$suspend" "$log_out" \
    | rofi -theme-str '@import "kn.rasi"' \
           -dmenu \
	   -i \
           -sep ';' )

case "$chosen" in
    "$power_off")
        sh ~/.config/bin/rofi-prompt --query 'Shutdown?' && poweroff
        ;;

    "$reboot")
        sh ~/.config/bin/rofi-prompt --query 'Reboot?' && reboot
        ;;

    "$suspend")
        # Pause music and mute volume before suspending.
        amixer set Master mute
        # TODO Add your suspend command.
	      systemctl suspend
        ;;

    "$log_out")
        # TODO Add your log out command.
	      sh ~/.config/bin/rofi-prompt --query 'Logout?' && i3-msg exit
        ;;

    *) exit 1 ;;
esac
