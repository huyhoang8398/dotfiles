#!/bin/bash

dunstctl history > /tmp/dunst_notifications.json

sed -i '1,3d' /tmp/dunst_notifications.json # unwanted first 3 lines
sed -i '$d' /tmp/dunst_notifications.json # Hardcoded remove 2 last lines
sed -i '$d' /tmp/dunst_notifications.json 
perl -i -pe 's/(?<![^\\]\\)(\\n)/temp/g' /tmp/dunst_notifications.json

json=$(cat /tmp/dunst_notifications.json)
echo $json | jq -cr '.[] | "\(.body.data)|\(.summary.data)|\(.appname.data)"' | 
  while IFS="|" read -r bodydata summarydata icon
  do
    echo -en "${summarydata} - ${bodydata}\0icon\x1f${icon}\n"
  done
  exit 1

